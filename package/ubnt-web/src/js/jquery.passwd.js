(function(d){d.fn.passwd=function(g){var h=d.extend({},d.fn.passwd.defaults,g);d.fn.passwd.toggler=function(k,j,i){k.click(function(){if(f()){if(d(this).attr("checked")){e(j,i,h);j.hide();i.show()}else{e(i,j,h);i.hide();j.show()}}else{c(j)}})};return this.each(function(){if(d(this).attr("name")!=d(this).attr("id")){d(this).attr("name",d(this).attr("id"))}var k="_"+this.id+"_t";var j=d.fn.passwd.create_toggler(d(this),k,h);if(f()){var l="_"+this.id+"_x";var i=b(d(this),l,h.clone_attrs,h.clone_styles);d(this).before(i);i.hide();d.fn.passwd.toggler(j,d(this),i)}else{d.fn.passwd.toggler(j,d(this))}})};function f(){return window.attachEvent&&!window.addEventListener}function c(g){if(g.get(0).type==="password"){g.get(0).type="text"}else{g.get(0).type="password"}}function b(i,k,g,h){var j=d('<input type="text" id="'+k+'" name="'+k+'" value="" />');jQuery.each(g,function(l,m){j.attr(m,i.attr(m))});jQuery.each(h,function(l,m){j.css(m,i.css(m))});j.css("display",i.css("display"));j.val(i.val());return j}function e(h,g,j){var k=h.attr("id");var i=h.attr("name");g.val(h.val());h.attr("id",g.attr("id")).attr("name",g.attr("name"));g.attr("id",k).attr("name",i);jQuery.each(j.clone_attrs,function(m,l){g.attr(l,h.attr(l))});jQuery.each(j.migrate_attrs,function(m,l){g.attr(l,h.attr(l));h.removeAttr(l)})}function a(g){if(window.console&&window.console.log){window.console.log("DEBUG: "+g)}}d.fn.passwd.create_toggler=function(j,k,h){var i=d('<input type="checkbox" id="'+k+'"/>');var g=d('<label for="'+k+'">'+h.label+"</label>");j.after(g).after(i);return i};d.fn.passwd.defaults={label:"Show",clone_attrs:["class","disabled","autocomplete","maxlength"],migrate_attrs:[],clone_styles:[]}})(jQuery);