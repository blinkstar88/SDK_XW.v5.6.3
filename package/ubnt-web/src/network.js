var IP_regex=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;function _validateIP(a){return IP_regex.exec(a)!=null}function _validateNonZeroIP(a){return _validateIP(a)&&a!="0.0.0.0"&&a!="255.255.255.255"}function _validateNetmask(b){if(!_validateIP(b)){return false}var a=b.split(".");if(a.length!=4){return false}var c=parseInt(a[0])*16777216+65536*parseInt(a[1])+256*parseInt(a[2])+parseInt(a[3]);c=256*256*256*256-c-1;return(c&(c+1))==0}var IP6_regex=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i;function _validateIP6(a){return IP6_regex.exec(a)!=null}function _validateIP6Netmask(b){var a=parseInt(b);return(a>=1&&a<=128)}function _validateIP6PrefixLen(b){var a=parseInt(b);return(a>=0&&a<=64)}function changeNetworkMode(b,d){var a=b.selectedIndex;var c=b.options[a].value;if(c!=d){window.location.href="network.cgi?netmode="+c}}function validatePort(d,b,c){if(!$("#"+d).is(":visible")){return true}var a=parseInt(c);return(a>=1&&a<=65535)}function validateAirsyncIP(d,b,c){var a=true;if($("#"+d).is(":visible")&&$("#airsync_mode").val()==2){a=_validateNonZeroIP(c)}return a}function validateBridgeIP(d,a,c){var b=document.getElementById("dhcp");if(!b.checked){return _validateNonZeroIP(c)}return true}function validateBridgeNetmask(d,a,c){var b=document.getElementById("dhcp");if(!b.checked){return _validateNetmask(c)&&c!="0.0.0.0"}return true}function validateBridgeOptIP(d,a,c){var b=document.getElementById("dhcp");if(!b.checked&&c.length>0){return _validateIP(c)}return true}var IPMODE_STATIC=0;var IPMODE_DHCP=1;var IPMODE_PPPOE=2;function chooseIPMode(a){switch(a){case IPMODE_STATIC:$(".i_dhcp, .i_pppoe").disable();$(".i_static").enable();$(".dhcp, .pppoe").hide();$(".static, .mtu").show();break;case IPMODE_DHCP:$(".i_static, .i_pppoe").disable();$(".i_dhcp").enable();$(".static, .pppoe").hide();$(".dhcp, .mtu").show();break;case IPMODE_PPPOE:$(".i_static, .i_dhcp").disable();$(".i_pppoe").enable();$(".dhcp, .static, .mtu").hide();$(".pppoe").show();break}}function validateWanIP(d,a,b){var c=getRadioValue("wlanipmode");if(parseInt(c)==IPMODE_STATIC){return _validateNonZeroIP(b)}return true}function validateWanNetmask(d,a,b){var c=getRadioValue("wlanipmode");if(parseInt(c)==IPMODE_STATIC){return _validateNetmask(b)&&b!="0.0.0.0"}return true}function validateWlanOptIP(d,a,b){var c=getRadioValue("wlanipmode");if(parseInt(c)==IPMODE_STATIC&&b.length>0){return _validateIP(b)&&b!="255.255.255.255"}return true}function validateWlanPPPoE(d,a,b){var c=getRadioValue("wlanipmode");if(parseInt(c)==IPMODE_PPPOE){return b!=null&&b.length>0}return true}function validateLanIP(c,a,b){return _validateNonZeroIP(b)}function validateLanNetmask(c,a,b){return _validateNetmask(b)&&b!="0.0.0.0"}function validateDMZIP(d,b,c){var a=document.getElementById("dmz_status");if(a.checked){return _validateNonZeroIP(c)}return true}function dmzStatusClicked(){var a=document.getElementById("dmz_status");$(".i_dmz").disable(!a.checked);$(".dmz").toggle(a.checked)}function natStatusClicked(){var a=$("#nat_status");$(".nat").toggle(a.is(":checked"))}function hwaddrStatusClicked(){var a=$("#hwaddr_status").is(":checked");if(a&&($hwaddr=$("#hwaddr")).val().length==0){$hwaddr.val($hwaddr.data("defmac"))}$(".i_hwaddr").disable(!a);$(".hwaddr").toggle(a)}function validateDhcpdIP(e,a,b){var d=document.getElementById("dhcpd_status");if(d.checked){return _validateNonZeroIP(b)}return true}function validateDhcpdNetmask(e,a,b){var d=document.getElementById("dhcpd_status");if(d.checked){return _validateNetmask(b)&&b!="0.0.0.0"}return true}function validateDhcpdDns(f,a,b){var e=document.getElementById("dhcpd_status");var d=document.getElementById("dhcpd_dnsproxy_status");if(e.checked&&!d.checked&&b.length>0){return _validateIP(b)&&b!="255.255.255.255"}return true}function validateFallbackIP(d,a,c){var b=document.getElementById("dhcp");if(b.checked){return _validateNonZeroIP(c)}return true}function validateFallbackNetMask(d,a,c){var b=document.getElementById("dhcp");if(b.checked){return _validateNetmask(c)&&c!="0.0.0.0"}return true}function validatePppoeFallbackIP(d,a,b){var c=document.getElementById("pppoe");if(c.checked&&b.length>0){return _validateNonZeroIP(b)}return true}function validatePppoeFallbackNetMask(d,a,b){var c=document.getElementById("pppoe");if(c.checked&&b.length>0){return _validateNetmask(b)&&b!="0.0.0.0"}return true}function validateHwAddr(d,b,c){var a=$("#hwaddr_status").is(":checked");if(a){return(c!=null&&c.length>0&&/^([0-9A-F]{2}:?){5}[0-9A-F]{2}$/i.test(c)&&!/^(F{2}:?){5}F{2}$/i.test(c))}return true}function validateDhcpReservHwAddr(a){return(a!=null&&a.length>0&&/^([0-9A-F]{2}:?){5}[0-9A-F]{2}$/i.test(a)&&!/^(F{2}:?){5}F{2}$/i.test(a))}var DHCP_DISABLED=0;var DHCP_ENABLED=1;var DHCP_RELAY=2;function dhcpdDnsproxyClicked(){var c=getRadioValue("dhcpserver");var b=document.getElementById("dhcpd_dnsproxy_status");var a=(c==DHCP_ENABLED)&&!b.checked;$(".i_dhcpd_dns").disable(!a);$(".dhcpd_dns").toggle(a)}function chooseDhcpServer(a){$(".i_dhcpd").disable(a!=DHCP_ENABLED);$(".dhcpd").toggle(a==DHCP_ENABLED);$(".i_dhcp_relay").disable(a!=DHCP_RELAY);$(".dhcp_relay").toggle(a==DHCP_RELAY);dhcpdDnsproxyClicked()}function _validateRouteTarget(d,c){var b=ipToInt(d);var a=ipToInt(c);return((b&a)==(b&b))}function ipToInt(c){var b=c.split(".");var a=16777216*parseInt(b[0])+65536*parseInt(b[1])+256*parseInt(b[2])+parseInt(b[3]);return a}function _validateNumbersOnly(a){return/^\d+$/.test(a)};