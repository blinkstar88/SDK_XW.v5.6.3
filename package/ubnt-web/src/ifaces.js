var mainTable;var _cols={name:0,rx:4,tx:6};var _initialized=false;function handleError(b,c,a){if(b&&b.status!=200&&b.status!=0){window.location.reload()}}function kickEnd(a,c,b){$(this).enable();refreshIfList()}function refreshIfList(){$.ajax({cache:false,url:"/iflist.cgi",dataType:"json",success:showIfList,error:handleError,complete:function(a,b){if(b!="success"){refreshIfList()}}})}function refreshAll(){if(typeof reloadStatus=="function"){reloadStatus()}refreshIfList()}function normalize_float(a){if(!a){return 0}if(a>100){return toFixed(a,0)}if(a>10){return toFixed(a,1)}return toFixed(a,2)}function formatBytes(b){var a="";if(Math.round(b)<1000){a=""}else{if(Math.round(b/1000)<1000){b=b/1000;a="K"}else{if(Math.round(b/1000/100)<1000){b=b/1000/1000;a="M"}else{b=b/1000/1000/1000;a="G"}}}b=normalize_float(b);return b+a}function getIfInfo(e){var a,d,b=e.ipv6;d=e.ipv4?e.ipv4.addr:"0.0.0.0";if(b){for(var c=0;c<b.length;++c){d=d.concat("<br/>",b[c].addr.toUpperCase(),"/",b[c].plen)}}a=[devname2uidevname(e.ifname),e.hwaddr,e.mtu,d,e.stats.rx_bytes,e.stats.rx_errors,e.stats.tx_bytes,e.stats.tx_errors];return a}function showIfList(c){mainTable.fnClearTable();for(var b=0;b<c.interfaces.length;++b){var d=c.interfaces[b];var a=mainTable.fnAddData(getIfInfo(d),true)}}function tableCell(b,c){var a=mainTable.oApi._fnColumnIndexToVisible(mainTable.fnSettings(),c);if(a==null){return $()}return $("td",b).eq(a)}$(document).ready(function(){if(_initialized){return}else{_initialized=true}$("#_refresh").click(refreshAll);$("#if_list th").removeClass("initial_hide");mainTable=$("#if_list").dataTable({aaSorting:[[0,"asc"]],bLengthChange:false,bPaginate:false,bFilter:false,bInfo:false,bSortClasses:false,bAutoWidth:false,oLanguage:{sEmptyTable:jsTranslate("Loading...")},fnInitComplete:function(a){a.oLanguage.sEmptyTable=jsTranslate("No interface information.")},fnRowCallback:function(d,c,b,a){$("td:eq("+_cols.rx+")",d).text(formatBytes(c[_cols.rx]));$("td:eq("+_cols.tx+")",d).text(formatBytes(c[_cols.tx]));return d},aoColumnDefs:[{sType:"string",aTargets:[_cols.name]}]});refreshIfList()});